2025-09-08 11:28:02.87
e7a8fd43
User
Exchanging code for token...
2025-09-08 11:28:02.87
e7a8fd43
User
Token exchange request:
2025-09-08 11:28:02.87
e7a8fd43
User
URL: https://citycatalyst.openearth.dev/api/v0/token/
2025-09-08 11:28:02.87
e7a8fd43
User
Body: grant_type=authorization_code&client_id=kIzoXFLTxmzu_L3FnL_CxMlDkI2cSm-L8rJ1LWn-hROvA4dQMK97aFC6ahOJd_CQ&code=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJrSXpvWEZMVHhtenVfTDNGbkxfQ3hNbERrSTJjU20tTDhySjFMV24taFJPdkE0ZFFNSzk3YUZDNmFoT0pkX0NRIiwicmVkaXJlY3RfdXJpIjoiaHR0cHM6Ly9jYy1ib3VuZGFyeS1waWNrZXIucmVwbGl0LmFwcC9hcGkvYXV0aC9vYXV0aC9jYWxsYmFjayIsInNjb3BlIjoicmVhZCB3cml0ZSIsImNvZGVfY2hhbGxlbmdlIjoiUHNWa1hvNTJRMlFROGM2Tk9fN3hwN1R1R1huOEo4SlUzN19EZUFOVTBfdyIsImlhdCI6MTc1NzM0MTY4MiwiZXhwIjoxNzU3MzQxOTgyLCJhdWQiOiJodHRwczovL2NpdHljYXRhbHlzdC5vcGVuZWFydGguZGV2IiwiaXNzIjoiaHR0cHM6Ly9jaXR5Y2F0YWx5c3Qub3BlbmVhcnRoLmRldiIsInN1YiI6IjFkNTNmNWI2LWZmYTMtNGUyNy05MjRhLTM0NzRmZGIxNmZmMyIsImp0aSI6IjY2OWFlZDdmLTU1YzgtNDU5OC04ZGNmLTEyNjA2OWQ2YjBiNSJ9.aF6dlrXHj5XRGKYEOyWQUsm9rB7XseFG5bMdbk8Ix5o&redirect_uri=https%3A%2F%2Fcc-boundary-picker.replit.app%2Fapi%2Fauth%2Foauth%2Fcallback&code_verifier=WLyzwH-ueKDE8o7tkBdiPeO10T_yk-TXKFt9iZjM7zw
2025-09-08 11:28:02.87
e7a8fd43
User
Client ID: kIzoXFLTxmzu_L3FnL_CxMlDkI2cSm-L8rJ1LWn-hROvA4dQMK97aFC6ahOJd_CQ
2025-09-08 11:28:02.87
e7a8fd43
User
Redirect URI: https://cc-boundary-picker.replit.app/api/auth/oauth/callback
2025-09-08 11:28:03.14
e7a8fd43
User
Token exchange response status: 200
2025-09-08 11:28:03.15
e7a8fd43
User
Token exchange response headers: {
2025-09-08 11:28:03.15
e7a8fd43
User
'access-control-allow-credentials': 'false',
2025-09-08 11:28:03.15
e7a8fd43
User
'access-control-allow-headers': 'Content-Type, Authorization',
2025-09-08 11:28:03.15
e7a8fd43
User
'access-control-allow-methods': 'GET,POST,PUT,PATCH,DELETE,OPTIONS',
2025-09-08 11:28:03.15
e7a8fd43
User
'access-control-allow-origin': '*',
2025-09-08 11:28:03.15
e7a8fd43
User
connection: 'keep-alive',
2025-09-08 11:28:03.15
e7a8fd43
User
'content-type': 'application/json',
2025-09-08 11:28:03.15
e7a8fd43
User
date: 'Mon, 08 Sep 2025 14:28:03 GMT',
2025-09-08 11:28:03.15
e7a8fd43
User
'transfer-encoding': 'chunked',
2025-09-08 11:28:03.15
e7a8fd43
User
vary: 'rsc, next-router-state-tree, next-router-prefetch, next-router-segment-prefetch'
2025-09-08 11:28:03.15
e7a8fd43
User
}
2025-09-08 11:28:03.15
e7a8fd43
User
Token exchange successful, getting user profile...
2025-09-08 11:28:03.15
e7a8fd43
User
Getting user identity from: https://citycatalyst.openearth.dev/api/v0/auth/me
2025-09-08 11:28:03.39
e7a8fd43
User
Auth/me response status: 200
2025-09-08 11:28:03.42
e7a8fd43
User
Auth response text: <!DOCTYPE html><html lang=""><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/1d8fe3653da23e85-s.p.woff2"...
2025-09-08 11:28:03.42
e7a8fd43
User
Auth response is not valid JSON, likely HTML error page
2025-09-08 11:28:03.42
e7a8fd43
User
Error fetching user profile: Error: Auth API returned HTML instead of JSON:
2025-09-08 11:28:03.42
e7a8fd43
User
at getUserProfile (file:///home/runner/workspace/dist/index.js:265:13)
2025-09-08 11:28:03.42
e7a8fd43
User
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-09-08 11:28:03.42
e7a8fd43
User
at async file:///home/runner/workspace/dist/index.js:715:32
2025-09-08 11:28:03.42
e7a8fd43
User
Using sample user data for testing
2025-09-08 11:28:03.42
e7a8fd43
User
User profile retrieved: elena.rodriguez@citycatalyst.org
2025-09-08 11:28:03.43
e7a8fd43
User
2:28:03 PM [express] GET /api/auth/oauth/callback 302 in 560ms
2025-09-08 11:28:04.14
e7a8fd43
User
2:28:04 PM [express] GET /api/user/profile 200 in 1ms :: {"id":"118cfcb9-823d-4686-87e9-7ab3f044dce5…
2025-09-08 11:28:04.14
e7a8fd43
User
2:28:04 PM [express] GET /api/cities 200 in 1ms :: {"cities":[{"id":"d2f5c37b-8a33-48f3-a164-9fbd526…