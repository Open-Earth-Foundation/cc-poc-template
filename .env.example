# ============================================================================
# CityCatalyst OAuth Integration Template - Environment Configuration
# ============================================================================
# 
# This file contains all required environment variables for the CityCatalyst
# OAuth 2.0 PKCE integration template. Copy this file to .env and fill in
# your actual values.
#
# SECURITY WARNING: Never commit your actual .env file to version control!
# The .env file should contain your real API keys and be kept secret.
#
# ============================================================================

# ============================================================================
# CITYCATALYST OAUTH CONFIGURATION (REQUIRED)
# ============================================================================

# OAuth Client ID from your CityCatalyst OAuth application
# Get this from: https://citycatalyst.openearth.dev/app/oauth/applications/
# Example: OAUTH_CLIENT_ID=your_client_id_here
OAUTH_CLIENT_ID=

# OAuth Redirect URI - MUST be set and exactly match your OAuth app configuration
# WARNING: If not set, may redirect to incorrect domain and cause login failures
# For development: http://localhost:5000/api/auth/oauth/callback
# For production: https://your-app.replit.app/api/auth/oauth/callback
OAUTH_REDIRECT_URI=http://localhost:5000/api/auth/oauth/callback

# CityCatalyst API Base URL
# Development: https://citycatalyst.openearth.dev
# Production: https://api.citycatalyst.io
AUTH_BASE_URL=https://citycatalyst.openearth.dev

# ============================================================================
# DATABASE CONFIGURATION (OPTIONAL)
# ============================================================================

# PostgreSQL Database URL (Optional - app uses in-memory storage by default)
# Format: postgresql://username:password@host:port/database
# For Replit: Use the database integration if you want persistent storage
# For local development: Set up PostgreSQL if you prefer database over memory
DATABASE_URL=postgresql://localhost:5432/citycatalyst_template

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Application Environment
# Values: development, production, test
NODE_ENV=development

# Server Port
# Default: 5000 (required for Replit frontend integration)
# Note: Frontend must connect to port 5000 for proper Vite integration
PORT=5000

# ============================================================================
# REPLIT CONFIGURATION (AUTO-CONFIGURED)
# ============================================================================

# Replit Environment Identifier (automatically set by Replit)
# Don't modify this - it's used for development environment detection
# REPL_ID=

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. CITYCATALYST OAUTH SETUP:
#    a. Go to https://citycatalyst.openearth.dev/app/oauth/applications/
#    b. Create a new OAuth application
#    c. Set redirect URI to match OAUTH_REDIRECT_URI above
#    d. Copy the Client ID to OAUTH_CLIENT_ID
#    e. Ensure your application has "read" and "write" scopes
#
# 2. DATABASE SETUP (OPTIONAL):
#    - By default: App uses in-memory storage (no setup required)
#    - For persistence: Use Replit's PostgreSQL database integration
#    - For local persistence: Install PostgreSQL and set DATABASE_URL
#
# 3. TESTING YOUR SETUP:
#    a. Start the application: npm run dev
#    b. Navigate to http://localhost:5000
#    c. Click "Login with CityCatalyst"
#    d. Complete OAuth flow
#    e. Verify you can see cities and user profile
#
# 4. PRODUCTION DEPLOYMENT:
#    - Update OAUTH_REDIRECT_URI to your production URL
#    - Set NODE_ENV=production
#    - Ensure DATABASE_URL points to production database
#    - Update AUTH_BASE_URL if using production CityCatalyst API
#
# ============================================================================
# TROUBLESHOOTING
# ============================================================================
#
# Common Issues:
#
# 1. "Client ID not found" error:
#    - Verify OAUTH_CLIENT_ID is correct
#    - Check CityCatalyst OAuth app is active
#
# 2. "Invalid redirect URI" error:
#    - Ensure OAUTH_REDIRECT_URI exactly matches OAuth app config
#    - Include/exclude trailing slashes consistently
#
# 3. "Database connection failed":
#    - App uses in-memory storage by default (DATABASE_URL optional)
#    - If using DATABASE_URL: verify format and credentials
#    - Ensure database exists and is accessible
#
# 4. "Not authenticated" errors:
#    - Check session cookies are enabled
#    - Verify secure cookie settings for HTTPS
#    - Clear browser cookies and retry OAuth flow
#    - If redirected to cc-boundary-picker.replit.app: set OAUTH_REDIRECT_URI and restart
#
# 5. "API calls failing":
#    - Verify AUTH_BASE_URL is correct
#    - Check network connectivity to CityCatalyst
#    - Ensure OAuth tokens are fresh (not expired)
#
# For more help, see: https://docs.citycatalyst.org/developers/oauth
#
# ============================================================================