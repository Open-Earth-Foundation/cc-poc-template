# CityCatalyst OAuth Template - Environment Variables
# =====================================================
# Copy this file to .env and fill in your actual values

# ===================
# OAUTH CONFIGURATION (Required)
# ===================

# CityCatalyst OAuth Client ID
# Obtain from your CityCatalyst OAuth application settings
OAUTH_CLIENT_ID=your_citycatalyst_client_id_here

# OAuth Redirect URI - MUST exactly match your CityCatalyst OAuth client configuration
# For development: http://localhost:5000/api/auth/oauth/callback
# For production: https://your-domain.com/api/auth/oauth/callback
# ⚠️  CRITICAL: This must be an exact match or OAuth will fail
OAUTH_REDIRECT_URI=https://your-domain.com/api/auth/oauth/callback

# CityCatalyst API Base URL
# Default: https://citycatalyst.openearth.dev (staging/development)
# Production: https://api.citycatalyst.io (when available)
# ⚠️  IMPORTANT: Must match the same environment where your OAuth client is registered
AUTH_BASE_URL=https://citycatalyst.openearth.dev

# ===================
# APPLICATION SETTINGS
# ===================

# Environment setting - affects cookie security, logging, and other behaviors
# Values: development, production, test
NODE_ENV=development

# Server port (default: 5000)
# Note: Frontend must bind to port 5000 in Replit environment
PORT=5000

# ===================
# DATABASE (if using persistent storage)
# ===================

# PostgreSQL connection string (required if using database instead of memory storage)
# For Replit: This is automatically provided when you create a database
# For external: postgresql://username:password@host:port/database
# DATABASE_URL=postgresql://username:password@localhost:5432/citycatalyst_app

# ===================
# DEBUGGING & DEVELOPMENT (Optional)
# ===================

# Enable OAuth debug logging - shows tokens, codes, headers (DEVELOPMENT ONLY!)
# Values: true, false
# ⚠️  WARNING: Never enable in production - exposes sensitive data
OAUTH_DEBUG=false

# ===================
# EXTERNAL APIS (Optional)
# ===================

# Overpass API URL for OSM data (used by boundary module - server-side only)
# Default: https://overpass-api.de/api/interpreter
# Note: This is a server-side API. Frontend env vars must be prefixed with VITE_
OVERPASS_API_URL=https://overpass-api.de/api/interpreter

# ===================
# REPLIT-SPECIFIC (Automatic)
# ===================

# These are automatically set by Replit - do not modify
# REPL_ID=automatically_set_by_replit
# REPLIT_DOMAIN=automatically_set_by_replit

# ===================
# SETUP INSTRUCTIONS
# ===================

# 1. Create a CityCatalyst OAuth application at:
#    https://citycatalyst.openearth.dev/oauth/applications/
#
# 2. Configure the OAuth application:
#    - Name: Your application name
#    - Redirect URI: Exactly match your OAUTH_REDIRECT_URI above
#    - Grant Type: Authorization Code
#    - PKCE: Required (S256 method)
#    - Scopes: read write
#
# 3. Copy the Client ID to OAUTH_CLIENT_ID above
#
# 4. Set OAUTH_REDIRECT_URI to your exact callback URL:
#    - Development: http://localhost:5000/api/auth/oauth/callback
#    - Replit: https://your-repl-name.your-username.replit.app/api/auth/oauth/callback
#    - Custom domain: https://your-domain.com/api/auth/oauth/callback
#
# 5. For production deployment:
#    - Set NODE_ENV=production
#    - Ensure OAUTH_DEBUG=false or remove it
#    - Use HTTPS for OAUTH_REDIRECT_URI
#    - Update CityCatalyst OAuth client with production redirect URI

# ===================
# TESTING CHECKLIST
# ===================

# Development Testing:
# □ OAuth initiation redirects to CityCatalyst
# □ Successful authorization redirects to /cities
# □ Failed authorization shows error on /login
# □ User profile loads correctly
# □ Logout clears session

# Production Testing:
# □ HTTPS redirect URI configured correctly
# □ OAuth flow works with production domain
# □ No debug logs in production output
# □ Session cookies use secure flag
# □ All environment variables set correctly